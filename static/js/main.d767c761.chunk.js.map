{"version":3,"sources":["game/loaders/modelLoader.ts","infrastructure/decorators/onPropertyChange.ts","game/worldEnviroment.ts","game/gameObjects/gameObjectWorldData.ts","game/gameObjects/moveableGameObject.ts","game/gameObjects/gameObject.ts","game/services/gameStateDataService.ts","game/gameWorld.ts","game/gameRenderer.ts","game/controls/cameraOrbitControls.ts","game/controls/cameraMapControls.ts","game/controls/worldInteractionControls.ts","game/controls/gameControls.ts","game/helpers/object3dHelper.ts","assets/icons/tower-icon.svg","game/index.ts","components/ui/icons/withSvgIcon.tsx","assets/icons/well-icon.svg","components/ui/icons/index.ts","containers/game/components/basicUI.tsx","containers/game/index.tsx","containers/home/index.tsx","containers/index.tsx","index.tsx"],"names":["ModelLoader","baseUrl","gltfLoader","dracoLoader","loadedModels","initialize","loadModels","models","completeCallback","loadCount","forEach","m","loadModel","loadedModel","name","onLoaded","length","gameModel","callback","load","path","gltf","object","scene","this","GLTFLoader","DRACOLoader","valuesCacheKey","Symbol","lastCallKey","defaultConfig","bulk","history","OnChange","props","config","propertyNames","normaliseProps","clazz","methodName","propertyName","originalDescriptor","Object","getOwnPropertyDescriptor","defineProperty","set","value","instance","ensureHiddenProps","updateValueCache","call","shouldCallTargetMethod","callTargetMethod","get","cache","currentValue","undefined","Array","isArray","propName","firstChange","previousValue","definedPropNames","keys","every","includes","p","valueMap","mapper","values","map","reduce","obj","WorldEnviromentDebugEnum","GameObjectWorldData","position","x","y","z","rotation","destination","isDirty","scale","castShadow","receiveShadow","selected","highlighted","MoveableGameObject","key","model","worldData","movementSpeed","destinationReached","getDistanceToMove","source","delta","newPostion","moveDistance","diff","Math","abs","renderedWorldData","time","updateData","move","textContainer","lastTextUpdate","selectedCircleMesh","circle","show","event","visible","material","color","setHex","updateDataBase","dest","prop","updateCallback","destProp","newValue","geometry","RingGeometry","MeshBasicMaterial","Mesh","PI","document","createElement","className","style","marginTop","textLabel","CSS2DObject","newGroup","Group","add","clone","userData","gameObjectKey","setScalar","newPosition","newRotation","innerHTML","toString","GameStateDataService","apiUri","wsUri","socket","messageHandlers","connectToWebsocket","userId","Promise","resolve","reject","fetch","method","mode","headers","Accept","body","JSON","stringify","user_id","then","r","json","url","WebSocket","onopen","onmessage","onMessageRecived","catch","createUnit","send","CreateUnit","setUnitPosition","id","SetUnitPosition","setUnitDestination","SetUnitDestination","fetchInitialGameState","response","state","addMessageHandler","type","handler","notifyHandlers","message","filter","h","e","msg","parse","data","console","log","process","WorldEnviroment","debugOptions","ambientLight","AmbientLight","light","DirectionalLight","shadow","bias","mapSize","width","height","d","camera","left","right","top","bottom","far","groundTexture","TextureLoader","wrapS","RepeatWrapping","wrapT","repeat","anisotropy","encoding","sRGBEncoding","groundMaterial","MeshLambertMaterial","groundMesh","PlaneGeometry","background","Color","fog","Fog","initializeDebug","setDebug","debug","ShowSmallGrid","smallGrid","GridHelper","ShowMediumGrid","mediumGrid","linewidth","ShowLargeGrid","largeGrid","GameWorld","setGameObjectWorldDataListeners","gameObjects","worldEnviroment","update","gm","addGameObject","gameObject","addSetGameObjectWorldDataListener","notifySetGameObjectWorldDataListener","li","setGameObjectWorldData","g","shallowEqual","object1","object2","keys1","keys2","k","setSelectedGameObjectsWorldData","forEachSelectedGameObject","go","setSelectedGameObjectsDestination","getSceneIntersection","raycaster","intersectObject","getGameObjectIntersection","intersects","intersectObjects","intersectedModel","intersection","getGameObjectRoot","hoverGameObject","selectGameObject","removeExsistingSelection","getGameObjectByKey","objects","parent","GameRenderer","container","renderer","labelRenderer","clock","stats","fps","lastRender","Date","now","updateTargets","setPixelRatio","window","devicePixelRatio","setSize","innerWidth","innerHeight","outputEncoding","shadowMap","enabled","domElement","addEventListener","handleWindowResize","appendChild","dom","aspect","updateProjectionMatrix","addUpdateTarget","updateTarget","start","requestAnimationFrame","renderLoop","lastRenderDiff","interval","getDelta","render","WebGLRenderer","antialias","Clock","CSS2DRenderer","Stats","changeEvent","startEvent","endEvent","CameraMapControls","screenSpacePanning","mouseButtons","LEFT","MOUSE","PAN","RIGHT","ROTATE","touches","ONE","TOUCH","TWO","DOLLY_ROTATE","target","minDistance","maxDistance","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","keyPanSpeed","autoRotate","autoRotateSpeed","target0","position0","zoom0","domElementKeyEvents","getPolarAngle","getAzimuthalAngle","listenToKeyEvents","saveState","reset","dispose","warn","Vector3","Infinity","UP","BOTTOM","MIDDLE","DOLLY","DOLLY_PAN","zoom","spherical","phi","theta","onKeyDown","scope","copy","dispatchEvent","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","min","max","Number","isFinite","makeSafe","radius","addScaledVector","panOffset","setFromSpherical","lookAt","multiplyScalar","zoomChanged","distanceToSquared","EPS","dot","quaternion","removeEventListener","onContextMenu","onPointerDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onPointerMove","onPointerUp","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","pointerType","preventDefault","focus","mouseAction","button","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","onMouseUp","handleMouseWheel","needsUpdate","code","handleKeyDown","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","passive","EventDispatcher","WorldInteractionControls","gameWorld","handleClick","handleMouseMove","getMouseRaycaster","Raycaster","mouse","setFromCamera","intersecs","handleLeftClick","handleRightClick","point","GameControls","cameraMapControls","worldInteractionControls","timer","Object3DHelper","cloneObject3D","recursive","cloneMaterials","newObject","traverse","mesh","isMesh","cloneMaterial","setShadows","newMaterial","im","isMaterial","_path","_path2","_path3","Game","gameRenderer","gameControls","modelLoader","gameStateDataService","connectToServer","connectionAtempt","handleConnectedToServer","connected","handleServerCreateUnit","handleServerSetUnitDestination","handleServerSetUnitPosition","setTimeout","pos","createMoveableTower","handleLoadModelsCompleted","resp","unit","handleActionbarButtonClicked","tower","well","handleGameObjectReachedDestination","posX","posZ","createMoveableGameObject","createMoveableWell","modelKey","gameObj","Scene","PerspectiveCamera","withSvgIcon","WrappedSvgIcon","defaultProps","defaultPropValues","fill","svgProps","PureComponent","_excluded","_extends","assign","i","arguments","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgTowerIcon","_ref","svgRef","title","titleId","xmlns","viewBox","xmlSpace","ref","ForwardRef","SvgWellIcon","TowerIcon","TowerIconSVG","WellIcon","WellIconSVG","BasicUI","handleButtonClick","onClickButton","nativeEvent","onClick","GameContainer","initialized","game","gameContainer","initGame","HomeContainer","padding","to","fontSize","App","basename","exact","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d767c761.chunk.js","sourcesContent":["import { Object3D } from 'three'\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\n\nexport interface GameModel {\n\tpath: string\n\tname: string\n\tonLoaded?: (model: LoadedGameModel) => void\n}\nexport interface LoadedGameModel extends GameModel {\n\tobject: Object3D\n}\n\nexport interface LoadedModels {\n\t[property: string]: LoadedGameModel\n}\nclass ModelLoader {\n\tprivate baseUrl: string\n\n\tprivate gltfLoader: GLTFLoader\n\n\tprivate dracoLoader: DRACOLoader\n\n\tpublic loadedModels: LoadedModels\n\n\tconstructor(baseUrl = '') {\n\t\tthis.baseUrl = baseUrl\n\t\tthis.gltfLoader = new GLTFLoader()\n\t\tthis.dracoLoader = new DRACOLoader()\n\t\tthis.loadedModels = {}\n\t}\n\n\tpublic initialize = (): void => {\n\t\t// this.dracoLoader.setDecoderPath('/assets/draco/')\n\t\t// this.gltfLoader.setDRACOLoader(this.dracoLoader)\n\t}\n\n\tpublic loadModels = (models: GameModel[], completeCallback: (loadedModels: LoadedModels) => void): void => {\n\t\tlet loadCount = 0\n\t\tmodels.forEach((m) => {\n\t\t\tthis.loadModel(m, (loadedModel) => {\n\t\t\t\tthis.loadedModels = {\n\t\t\t\t\t...this.loadedModels,\n\t\t\t\t\t[loadedModel.name]: loadedModel\n\t\t\t\t}\n\t\t\t\tloadCount += 1\n\t\t\t\tif (m.onLoaded) {\n\t\t\t\t\tm.onLoaded(loadedModel)\n\t\t\t\t}\n\t\t\t\tif (loadCount === models.length) {\n\t\t\t\t\tcompleteCallback(this.loadedModels)\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\n\tprivate loadModel = (gameModel: GameModel, callback: (model: LoadedGameModel) => void): void => {\n\t\tthis.gltfLoader.load(`${this.baseUrl}${gameModel.path}`, (gltf) => {\n\t\t\tcallback({\n\t\t\t\t...gameModel,\n\t\t\t\tobject: gltf.scene\n\t\t\t})\n\t\t})\n\t}\n}\n\nexport default ModelLoader\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable no-param-reassign */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable symbol-description */\n/* eslint-disable @typescript-eslint/no-this-alias */\n/* eslint-disable no-restricted-syntax */\nexport interface OnPropertyChangeConfig {\n\thistory?: boolean\n\tbulk?: boolean\n}\n\nconst valuesCacheKey = Symbol()\nconst lastCallKey = Symbol()\n\nconst defaultConfig = {\n\tbulk: false,\n\thistory: false\n}\nexport interface PropertyChange<T> {\n\tfirstChange: boolean\n\tpreviousValue: T\n\tcurrentValue: T\n}\n\nexport function OnChange(props: string | string[], config: OnPropertyChangeConfig = defaultConfig): MethodDecorator {\n\tconst propertyNames = normaliseProps(props)\n\n\treturn (clazz: any, methodName: PropertyKey): void => {\n\t\tfor (const propertyName of propertyNames) {\n\t\t\tconst originalDescriptor = Object.getOwnPropertyDescriptor(clazz, propertyName)\n\n\t\t\tObject.defineProperty(clazz, propertyName, {\n\t\t\t\tset(value) {\n\t\t\t\t\tconst instance = this\n\n\t\t\t\t\tif (value === instance[propertyName]) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tensureHiddenProps(instance)\n\t\t\t\t\tupdateValueCache(instance, propertyName, value)\n\n\t\t\t\t\tif (originalDescriptor) {\n\t\t\t\t\t\toriginalDescriptor.set?.call(instance, value)\n\t\t\t\t\t}\n\n\t\t\t\t\tif (shouldCallTargetMethod(clazz, instance, methodName, propertyNames, config)) {\n\t\t\t\t\t\tcallTargetMethod(clazz, instance, methodName, propertyNames, config)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tget() {\n\t\t\t\t\tconst instance = this\n\t\t\t\t\tif (originalDescriptor) {\n\t\t\t\t\t\treturn originalDescriptor.get?.call(instance)\n\t\t\t\t\t}\n\t\t\t\t\tconst cache = instance[valuesCacheKey] && instance[valuesCacheKey][propertyName]\n\t\t\t\t\treturn cache ? cache.currentValue : undefined\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n}\n\n// This line is here for compatibility with older versions\nexport const OnPropertyChange = OnChange\n\nfunction normaliseProps(props: string | string[]): string[] {\n\tif (Array.isArray(props)) {\n\t\treturn props as unknown as string[]\n\t}\n\treturn [props as unknown as string]\n}\n\nfunction ensureHiddenProps(instance: any) {\n\tif (!instance[valuesCacheKey]) {\n\t\tinstance[valuesCacheKey] = {}\n\t}\n\tif (!instance[lastCallKey]) {\n\t\tinstance[lastCallKey] = {}\n\t}\n}\n\nfunction updateValueCache(instance: any, propName: any, value: any) {\n\tif (instance[valuesCacheKey][propName]) {\n\t\tinstance[valuesCacheKey][propName].firstChange = false\n\t} else {\n\t\tinstance[valuesCacheKey][propName] = { firstChange: true }\n\t}\n\n\tconst cache = instance[valuesCacheKey][propName]\n\tcache.previousValue = cache.currentValue\n\tcache.currentValue = value\n}\n\nfunction shouldCallTargetMethod(clazz: any, instance: any, methodName: PropertyKey, props: string[], config: OnPropertyChangeConfig): boolean {\n\tconst definedPropNames = Object.keys(instance[valuesCacheKey])\n\tconst allPropsDefined = props.every((name) => definedPropNames.includes(name))\n\tif (allPropsDefined) {\n\t\tif (config.bulk) {\n\t\t\tconst neverCalled = !instance[lastCallKey][methodName]\n\t\t\treturn neverCalled || props.every((p) => instance[valuesCacheKey][p].currentValue !== instance[lastCallKey][methodName][p])\n\t\t}\n\t\treturn true\n\t}\n\n\treturn false\n}\n\nfunction callTargetMethod(clazz: any, instance: any, methodName: PropertyKey, props: string[], config: OnPropertyChangeConfig): void {\n\tconst valueMap = instance[valuesCacheKey]\n\tconst mapper = config.history ? (p: any) => valueMap[p] : (p: any) => valueMap[p].currentValue\n\tconst values = props.map(mapper)\n\n\tclazz[methodName].call(instance, ...values)\n\n\tinstance[lastCallKey][methodName] = props.reduce((obj, p) => ({ ...obj, [p]: valueMap[p].currentValue }), {})\n}\n","import { AmbientLight, Color, DirectionalLight, Fog, GridHelper, LineBasicMaterial, Mesh, MeshLambertMaterial, PlaneGeometry, RepeatWrapping, Scene, sRGBEncoding, TextureLoader } from 'three'\n\nexport enum WorldEnviromentDebugEnum {\n\tShowSmallGrid,\n\tShowMediumGrid,\n\tShowLargeGrid\n}\nclass WorldEnviroment {\n\tprivate scene: Scene\n\n\tprivate debugOptions: {\n\t\t[key in keyof typeof WorldEnviromentDebugEnum]?: boolean\n\t}\n\n\tconstructor(scene: Scene) {\n\t\tthis.scene = scene\n\t\tthis.debugOptions = {}\n\t}\n\n\tpublic initialize = (): void => {\n\t\t// lights\n\t\tconst ambientLight = new AmbientLight(0x666666, 0.6)\n\t\tthis.scene.add(ambientLight)\n\n\t\tconst light = new DirectionalLight(0xdfebff, 0.7)\n\t\tlight.position.set(500, 800, 500)\n\n\t\tlight.castShadow = true\n\t\tlight.shadow.bias = -0.0001\n\t\tlight.shadow.mapSize.width = 10000\n\t\tlight.shadow.mapSize.height = 10000\n\n\t\tconst d = 500\n\n\t\tlight.shadow.camera.left = -d\n\t\tlight.shadow.camera.right = d\n\t\tlight.shadow.camera.top = d\n\t\tlight.shadow.camera.bottom = -d\n\n\t\t// light.shadow.camera.near = 10\n\t\tlight.shadow.camera.far = 2000\n\n\t\tthis.scene.add(light)\n\n\t\t// ground\n\t\tconst textureLoader = new TextureLoader()\n\t\tconst groundTexture = textureLoader.load('assets/textures/terrain/grasslight-big.jpg')\n\n\t\tgroundTexture.wrapS = RepeatWrapping\n\t\tgroundTexture.wrapT = RepeatWrapping\n\t\tgroundTexture.repeat.set(200, 200)\n\t\tgroundTexture.anisotropy = 16\n\t\tgroundTexture.encoding = sRGBEncoding\n\n\t\tconst groundMaterial = new MeshLambertMaterial({ map: groundTexture })\n\t\tconst groundMesh = new Mesh(new PlaneGeometry(1000, 1000), groundMaterial)\n\n\t\tgroundMesh.rotation.x = -Math.PI / 2\n\t\tgroundMesh.receiveShadow = true\n\t\tthis.scene.add(groundMesh)\n\n\t\t// sky and fog\n\t\tthis.scene.background = new Color(0xcce0ff)\n\t\tthis.scene.fog = new Fog(0xcce0ff, 75, 150)\n\n\t\t// this.scene.environment = pmremGenerator.fromScene(new RoomEnvironment()).texture\n\t\t// this.scene.fog = new THREE.Fog(0xcccccc, 10, 50)\n\t\tthis.initializeDebug()\n\t}\n\n\tpublic setDebug = (...debug: WorldEnviromentDebugEnum[]): void => {\n\t\tdebug.forEach((d) => {\n\t\t\tthis.debugOptions = {\n\t\t\t\t...this.debugOptions,\n\t\t\t\t[WorldEnviromentDebugEnum[d]]: true\n\t\t\t}\n\t\t})\n\t}\n\n\tprivate initializeDebug = (): void => {\n\t\tif (this.debugOptions.ShowSmallGrid) {\n\t\t\tconst smallGrid = new GridHelper(1000, 1000, 0xcccccc, 0xcccccc)\n\t\t\tthis.scene.add(smallGrid)\n\t\t}\n\n\t\tif (this.debugOptions.ShowMediumGrid) {\n\t\t\tconst mediumGrid = new GridHelper(1000, 100, 0x333333, 0x333333)\n\t\t\tconst mediumGridMaterial = mediumGrid.material as LineBasicMaterial\n\t\t\tmediumGridMaterial.linewidth = 3\n\t\t\tthis.scene.add(mediumGrid)\n\t\t}\n\n\t\tif (this.debugOptions.ShowLargeGrid) {\n\t\t\tconst largeGrid = new GridHelper(1000, 10, 0x999999, 0x999999)\n\t\t\tconst largeGridMaterial = largeGrid.material as LineBasicMaterial\n\t\t\tlargeGridMaterial.linewidth = 5\n\t\t\tthis.scene.add(largeGrid)\n\t\t}\n\t}\n}\n\nexport default WorldEnviroment\n","import { OnChange } from '../../infrastructure/decorators/onPropertyChange'\n\nexport interface ICordinates {\n\tx: number\n\ty: number\n\tz: number\n}\nexport interface IGameObjectWorldData {\n\tposition: ICordinates\n\trotation: ICordinates\n\tdestination: ICordinates\n\tscale: number\n\tcastShadow: boolean\n\treceiveShadow: boolean\n\tselected: boolean\n\thighlighted: boolean\n\tisDirty: boolean\n}\n\nclass GameObjectWorldData implements IGameObjectWorldData {\n\tpublic position: ICordinates = { x: 0, y: 0, z: 0 }\n\n\tpublic rotation: ICordinates = { x: 0, y: 0, z: 0 }\n\n\tpublic destination: ICordinates = this.position\n\n\tpublic isDirty = false\n\n\tpublic scale = 1\n\n\tpublic castShadow = false\n\n\tpublic receiveShadow = false\n\n\tpublic selected = false\n\n\tpublic highlighted = false\n\n\t@OnChange(['selected', 'highlighted', 'position', 'scale', 'rotation'])\n\tprotected setDirty(): void {\n\t\tthis.isDirty = true\n\t}\n\n\tprotected clearDirty(): void {\n\t\tthis.isDirty = false\n\t}\n}\n\nexport default GameObjectWorldData\n","import { Object3D } from 'three'\nimport GameObject, { IGameObject } from './gameObject'\nimport GameObjectWorldData, { ICordinates, IGameObjectWorldData } from './gameObjectWorldData'\n\nexport type IMoveableGameObject = IGameObject\n\nclass MoveableGameObject extends GameObject implements IMoveableGameObject {\n\tpublic movementSpeed = 5\n\n\tpublic destinationReached?: (obj: this) => void\n\n\tconstructor(key: string, model: Object3D, worldData: IGameObjectWorldData = new GameObjectWorldData()) {\n\t\tsuper(key, model, worldData)\n\t\tthis.worldData = worldData\n\t\tthis.renderedWorldData = new GameObjectWorldData()\n\t}\n\n\tpublic update(time: number, delta: number): void {\n\t\tconst updateData = this.updateData<IGameObjectWorldData>()\n\t\tupdateData('destination')\n\n\t\tconst { worldData } = this\n\t\tif (worldData.position.x !== worldData.destination.x || worldData.position.z !== worldData.destination.z) {\n\t\t\tworldData.position = this.move(worldData.position, worldData.destination, delta)\n\t\t\tif (worldData.position.x === worldData.destination.x && worldData.position.z === worldData.destination.z) {\n\t\t\t\tif (this.destinationReached) {\n\t\t\t\t\tthis.destinationReached(this)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsuper.update(time, delta)\n\t\t// updateData('position')\n\t}\n\n\tprivate move(source: ICordinates, destination: ICordinates, delta: number): ICordinates {\n\t\treturn {\n\t\t\tx: this.getDistanceToMove(source.x, destination.x, delta),\n\t\t\ty: this.getDistanceToMove(source.y, destination.y, delta),\n\t\t\tz: this.getDistanceToMove(source.z, destination.z, delta)\n\t\t}\n\t}\n\n\tprivate getDistanceToMove = (source: number, destination: number, delta: number): number => {\n\t\tlet newPostion: number = source\n\t\tlet moveDistance = delta * this.movementSpeed\n\t\tconst diff = Math.abs(destination - source)\n\t\tif (diff === 0) {\n\t\t\treturn destination\n\t\t}\n\t\tif (diff < moveDistance) {\n\t\t\tmoveDistance = diff\n\t\t}\n\t\tif (source > destination) {\n\t\t\tnewPostion = source - moveDistance\n\t\t}\n\t\tif (source < destination) {\n\t\t\tnewPostion = source + moveDistance\n\t\t}\n\t\treturn newPostion\n\t}\n}\nexport default MoveableGameObject\n","import { Group, Mesh, MeshBasicMaterial, Object3D, RingGeometry } from 'three'\nimport { CSS2DObject } from 'three/examples/jsm/renderers/CSS2DRenderer'\nimport GameObjectWorldData, { IGameObjectWorldData } from './gameObjectWorldData'\n\nexport interface IGameObject {\n\tworldData: IGameObjectWorldData\n\tmodel: Object3D\n\tkey: string\n\tupdate: (time: number, delta: number) => void\n}\nclass GameObject implements IGameObject {\n\tpublic key: string\n\n\tpublic model: Object3D\n\n\tpublic textContainer: HTMLDivElement\n\n\tpublic lastTextUpdate = 0\n\n\tpublic selectedCircleMesh: Mesh<RingGeometry, MeshBasicMaterial>\n\n\tpublic worldData: IGameObjectWorldData\n\n\tprotected renderedWorldData: IGameObjectWorldData\n\n\tconstructor(key: string, model: Object3D, worldData: IGameObjectWorldData = new GameObjectWorldData()) {\n\t\tthis.key = key\n\t\tthis.worldData = worldData\n\t\tthis.renderedWorldData = new GameObjectWorldData()\n\n\t\tconst geometry = new RingGeometry(3.5, 3.6, 32)\n\t\tconst material = new MeshBasicMaterial({ color: 0x3336699 })\n\t\tthis.selectedCircleMesh = new Mesh<RingGeometry, MeshBasicMaterial>(geometry, material)\n\t\tthis.selectedCircleMesh.rotation.x = -Math.PI / 2\n\t\tthis.selectedCircleMesh.position.y = 0\n\t\tthis.selectedCircleMesh.visible = false\n\n\t\tthis.textContainer = document.createElement('div')\n\t\tthis.textContainer.className = 'text-label'\n\t\tthis.textContainer.style.marginTop = '-1em'\n\t\tconst textLabel = new CSS2DObject(this.textContainer)\n\t\ttextLabel.position.set(0, 8, 0)\n\n\t\tconst newGroup = new Group()\n\t\tnewGroup.add(textLabel)\n\t\tnewGroup.add(this.selectedCircleMesh)\n\t\tnewGroup.add(model.clone())\n\t\tnewGroup.userData = {\n\t\t\tgameObjectKey: key\n\t\t}\n\t\tthis.model = newGroup\n\t}\n\n\tprivate circle = (show: boolean, event: 'highlighted' | 'selected'): void => {\n\t\tthis.selectedCircleMesh.visible = show\n\t\tif (event === 'highlighted') this.selectedCircleMesh.material.color.setHex(0x333333)\n\t\tif (event === 'selected') this.selectedCircleMesh.material.color.setHex(0x336699)\n\t}\n\n\tprotected updateDataBase =\n\t\t<T>() =>\n\t\t<K extends keyof T>(source: T, dest: T, prop: K, updateCallback: ((value: T[K]) => void) | undefined = undefined): void => {\n\t\t\tconst destProp = dest[prop]\n\t\t\tif (destProp !== source[prop]) {\n\t\t\t\tif (updateCallback) updateCallback(source[prop])\n\t\t\t}\n\t\t}\n\n\tprotected updateData =\n\t\t<T extends unknown>() =>\n\t\t<K extends keyof T>(prop: K, updateCallback: ((value: T[K]) => void) | undefined = undefined): void => {\n\t\t\tconst worldData = this.worldData as T\n\t\t\tconst renderedWorldData = this.renderedWorldData as T\n\t\t\tthis.updateDataBase<T>()(worldData, renderedWorldData, prop, (newValue) => {\n\t\t\t\tif (updateCallback) updateCallback(newValue)\n\t\t\t\trenderedWorldData[prop] = newValue\n\t\t\t})\n\t\t}\n\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tpublic update(time: number, delta: number): void {\n\t\tif (!this.worldData.isDirty) {\n\t\t\treturn\n\t\t}\n\t\tconst updateData = this.updateData<IGameObjectWorldData>()\n\t\tupdateData('scale', (scale) => {\n\t\t\tthis.model.scale.setScalar(scale)\n\t\t})\n\t\tupdateData('position', (newPosition) => {\n\t\t\tthis.model.position.x = newPosition.x\n\t\t\tthis.model.position.y = newPosition.y\n\t\t\tthis.model.position.z = newPosition.z\n\t\t})\n\n\t\tupdateData('selected', (selected) => {\n\t\t\tthis.circle(selected || this.worldData.highlighted, 'selected')\n\t\t})\n\t\tupdateData('rotation', (newRotation) => {\n\t\t\tthis.model.rotation.x = newRotation.x\n\t\t\tthis.model.rotation.y = newRotation.y\n\t\t\tthis.model.rotation.z = newRotation.z\n\t\t})\n\t\tupdateData('highlighted', (highlighted) => {\n\t\t\tthis.circle(highlighted || this.worldData.selected, 'highlighted')\n\t\t})\n\t\tif (this.lastTextUpdate + 100 <= time || this.lastTextUpdate === 0) {\n\t\t\tthis.textContainer.innerHTML = `renderTime: ${time.toString()}<br />`\n\t\t\tthis.lastTextUpdate = time\n\t\t}\n\t\tthis.worldData.isDirty = false\n\t}\n}\nexport default GameObject\n","import { ConnectResponse, CreateUnitRequest, CreateUnitResponse, GameState, SetUnitPosition, SetUnitDestination } from './models'\n\ninterface WebsocketMessages {\n\tCreateUnit: CreateUnitResponse\n\tSetUnitPosition: SetUnitPosition\n\tSetUnitDestination: SetUnitDestination\n}\n\ntype WebsocketMessageType = keyof WebsocketMessages\ntype WebsocketMessage = WebsocketMessages[WebsocketMessageType]\n\ntype MessageHandlerCallback<TMessage> = (message: TMessage) => void\ntype AddMessageHandler = <TMessageKey extends WebsocketMessageType>(type: TMessageKey, handler: MessageHandlerCallback<WebsocketMessages[TMessageKey]>) => void\ninterface MessageHandler {\n\ttype: WebsocketMessageType\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\thandler: MessageHandlerCallback<any & WebsocketMessage>\n}\n\nclass GameStateDataService {\n\tprivate apiUri: string\n\n\tprivate wsUri: string\n\n\tprivate socket: WebSocket | undefined\n\n\tprivate messageHandlers: MessageHandler[]\n\n\tconstructor() {\n\t\tthis.apiUri = process.env.REACT_APP_SERVER_API\n\t\tthis.wsUri = process.env.REACT_APP_SERVER_WS\n\n\t\tthis.messageHandlers = []\n\t}\n\n\tpublic connectToWebsocket = (userId: number): Promise<boolean> =>\n\t\tnew Promise<boolean>((resolve, reject) => {\n\t\t\tfetch(`${this.apiUri}/register`, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tmode: 'cors',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({ user_id: userId })\n\t\t\t})\n\t\t\t\t.then((r) => {\n\t\t\t\t\treturn r.json()\n\t\t\t\t})\n\t\t\t\t.then((r: ConnectResponse): string => {\n\t\t\t\t\treturn r.url\n\t\t\t\t})\n\t\t\t\t.then((url) => {\n\t\t\t\t\tconst socket = new WebSocket(`${this.wsUri}/${url}`)\n\t\t\t\t\tsocket.onopen = () => {\n\t\t\t\t\t\tsocket.onmessage = this.onMessageRecived\n\t\t\t\t\t\tthis.socket = socket\n\t\t\t\t\t\tresolve(true)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(() => reject())\n\t\t})\n\n\tpublic createUnit = (x: number, z: number): void => {\n\t\tthis.socket?.send(JSON.stringify({ CreateUnit: { position: [x, z] } } as CreateUnitRequest))\n\t}\n\n\tpublic setUnitPosition = (id: string, x: number, z: number): void => {\n\t\tthis.socket?.send(JSON.stringify({ SetUnitPosition: { position: [x, z], id } } as SetUnitPosition))\n\t}\n\n\tpublic setUnitDestination = (id: string, x: number, z: number): void => {\n\t\tthis.socket?.send(JSON.stringify({ SetUnitDestination: { destination: [x, z], id } } as SetUnitDestination))\n\t}\n\n\tpublic fetchInitialGameState = (): Promise<GameState> =>\n\t\tnew Promise<GameState>((resolve, reject) => {\n\t\t\tfetch(`${this.apiUri}/game`)\n\t\t\t\t.then((response) => response.json())\n\t\t\t\t.then((state: GameState) => resolve(state))\n\t\t\t\t.catch(() => reject())\n\t\t})\n\n\tpublic addMessageHandler: AddMessageHandler = (type, handler) => {\n\t\tthis.messageHandlers = [...this.messageHandlers, { type, handler }]\n\t}\n\n\tprivate notifyHandlers = (type: WebsocketMessageType, message: WebsocketMessage): void => {\n\t\tthis.messageHandlers.filter((h) => h.type === type).forEach((handler) => handler.handler(message))\n\t}\n\n\tprivate onMessageRecived = (e: MessageEvent): void => {\n\t\tconst msg: WebsocketMessage = JSON.parse(e.data)\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.log('onMessageRecived', msg)\n\t\tif ((msg as CreateUnitResponse).CreateUnit) {\n\t\t\tthis.notifyHandlers('CreateUnit', msg)\n\t\t}\n\t\tif ((msg as SetUnitDestination).SetUnitDestination) {\n\t\t\tthis.notifyHandlers('SetUnitDestination', msg)\n\t\t}\n\t\tif ((msg as SetUnitPosition).SetUnitPosition) {\n\t\t\tthis.notifyHandlers('SetUnitPosition', msg)\n\t\t}\n\t}\n}\n\nexport default GameStateDataService\n","import { Intersection, Object3D, Raycaster, Scene } from 'three'\nimport { IGameObject } from './gameObjects/gameObject'\nimport { ICordinates, IGameObjectWorldData } from './gameObjects/gameObjectWorldData'\nimport { IUpdate } from './gameRenderer'\nimport WorldEnviroment, { WorldEnviromentDebugEnum } from './worldEnviroment'\n\nclass GameWorld implements IUpdate {\n\tprivate setGameObjectWorldDataListeners: {\n\t\ttype: keyof IGameObjectWorldData\n\t\thandler: (id: string, data: IGameObjectWorldData) => void\n\t}[]\n\n\tprivate scene: Scene\n\n\tpublic gameObjects: IGameObject[]\n\n\tprivate worldEnviroment: WorldEnviroment\n\n\tconstructor(scene: Scene) {\n\t\tthis.setGameObjectWorldDataListeners = []\n\t\tthis.scene = scene\n\t\tthis.worldEnviroment = new WorldEnviroment(scene)\n\t\tthis.gameObjects = []\n\t}\n\n\tpublic initialize = (): void => {\n\t\tthis.worldEnviroment.setDebug(WorldEnviromentDebugEnum.ShowMediumGrid, WorldEnviromentDebugEnum.ShowLargeGrid)\n\t\tthis.worldEnviroment.initialize()\n\t}\n\n\tpublic update = (time: number, delta: number): void => {\n\t\tthis.gameObjects.forEach((gm) => gm.update(time, delta))\n\t}\n\n\tpublic addGameObject = (gameObject: IGameObject): void => {\n\t\tthis.scene.add(gameObject.model)\n\t\tthis.gameObjects = [...this.gameObjects, gameObject]\n\t}\n\n\tpublic addSetGameObjectWorldDataListener = (prop: keyof IGameObjectWorldData, handler: (id: string, data: IGameObjectWorldData) => void): void => {\n\t\tthis.setGameObjectWorldDataListeners = [...this.setGameObjectWorldDataListeners, { type: prop, handler }]\n\t}\n\n\tprivate notifySetGameObjectWorldDataListener = <K extends keyof IGameObjectWorldData>(id: string, prop: K, data: IGameObjectWorldData): void => {\n\t\tthis.setGameObjectWorldDataListeners\n\t\t\t.filter((li) => li.type === prop)\n\t\t\t.forEach((li) => {\n\t\t\t\tli.handler(id, data)\n\t\t\t})\n\t}\n\n\tpublic setGameObjectWorldData = <K extends keyof IGameObjectWorldData>(id: string, prop: K, value: IGameObjectWorldData[K]): void => {\n\t\tthis.gameObjects\n\t\t\t.filter((x) => x.key === id)\n\t\t\t.forEach((g) => {\n\t\t\t\tconst gameObject = g\n\t\t\t\tconst changed = !this.shallowEqual(gameObject.worldData[prop], value)\n\t\t\t\tif (changed) {\n\t\t\t\t\tgameObject.worldData[prop] = value\n\t\t\t\t\tthis.notifySetGameObjectWorldDataListener(id, prop, gameObject.worldData)\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tprivate shallowEqual = <T>(object1: T, object2: T): boolean => {\n\t\tconst keys1 = Object.keys(object1)\n\t\tconst keys2 = Object.keys(object2)\n\n\t\tif (keys1.length !== keys2.length) {\n\t\t\treturn false\n\t\t}\n\t\tif (keys1.filter((k) => object1[k as keyof T] !== object2[k as keyof T]).length > 0) {\n\t\t\treturn false\n\t\t}\n\n\t\treturn true\n\t}\n\n\tpublic setSelectedGameObjectsWorldData = <K extends keyof IGameObjectWorldData>(prop: K, value: IGameObjectWorldData[K]): void => {\n\t\tthis.forEachSelectedGameObject((go) => {\n\t\t\tthis.setGameObjectWorldData(go.key, prop, value)\n\t\t})\n\t}\n\n\tprivate forEachSelectedGameObject = (callback: (gameObject: IGameObject, index: number, all: IGameObject[]) => void): void => {\n\t\tthis.gameObjects.filter((x) => x.worldData.selected).forEach(callback)\n\t}\n\n\tpublic setSelectedGameObjectsDestination = (destination: ICordinates): void => {\n\t\tthis.forEachSelectedGameObject((go) => {\n\t\t\tthis.setGameObjectWorldData(go.key, 'destination', {\n\t\t\t\t...go.worldData.destination,\n\t\t\t\tx: destination.x,\n\t\t\t\tz: destination.z\n\t\t\t})\n\t\t})\n\t}\n\n\tpublic getSceneIntersection = (raycaster: Raycaster): Intersection[] => {\n\t\treturn raycaster.intersectObject(this.scene, true)\n\t}\n\n\tpublic getGameObjectIntersection = (raycaster: Raycaster): IGameObject | null => {\n\t\tconst intersects = raycaster.intersectObjects(\n\t\t\tthis.gameObjects.map((go) => go.model),\n\t\t\ttrue\n\t\t)\n\t\tlet intersectedModel: IGameObject | null = null\n\t\tintersects.forEach((intersection): void => {\n\t\t\tconst gameModel = this.getGameObjectRoot(intersection.object)\n\t\t\tif (!intersectedModel && gameModel) {\n\t\t\t\tintersectedModel = gameModel\n\t\t\t}\n\t\t})\n\n\t\treturn intersectedModel\n\t}\n\n\tpublic hoverGameObject = (gameObject: IGameObject | null = null): void => {\n\t\tthis.gameObjects\n\t\t\t.filter((x) => x.worldData.highlighted || (gameObject !== null && x.key === gameObject.key))\n\t\t\t.forEach((go) => {\n\t\t\t\tconst { worldData } = go\n\t\t\t\tif (gameObject !== null && go.key === gameObject.key) {\n\t\t\t\t\tworldData.highlighted = true\n\t\t\t\t} else {\n\t\t\t\t\tworldData.highlighted = false\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tpublic selectGameObject = (gameObject: IGameObject | null = null, removeExsistingSelection: boolean): void => {\n\t\tthis.gameObjects\n\t\t\t.filter((x) => x.worldData.selected || (gameObject !== null && x.key === gameObject.key))\n\t\t\t.forEach((go) => {\n\t\t\t\tconst { worldData } = go\n\t\t\t\tif (gameObject !== null && go.key === gameObject.key) {\n\t\t\t\t\tworldData.selected = true\n\t\t\t\t} else if (removeExsistingSelection) {\n\t\t\t\t\tworldData.selected = false\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tprivate getGameObjectByKey = (key: string): IGameObject | null => {\n\t\tconst objects = this.gameObjects.filter((gm) => gm.key === key)\n\t\tif (objects.length > 0) return objects[0]\n\t\treturn null\n\t}\n\n\tprivate getGameObjectRoot = (object: Object3D): IGameObject | null => {\n\t\tif (object.userData.gameObjectKey) {\n\t\t\treturn this.getGameObjectByKey(object.userData.gameObjectKey)\n\t\t}\n\t\tif (object.parent) {\n\t\t\treturn this.getGameObjectRoot(object.parent)\n\t\t}\n\t\treturn null\n\t}\n}\n\nexport default GameWorld\n","import Stats from 'three/examples/jsm/libs/stats.module'\nimport { Clock, PerspectiveCamera, Scene, sRGBEncoding, WebGLRenderer } from 'three'\n\nimport { CSS2DRenderer } from 'three/examples/jsm/renderers/CSS2DRenderer.js'\n\nexport interface IUpdate {\n\tupdate: (timer: number, delta: number) => void\n}\nclass GameRenderer {\n\tprivate camera: PerspectiveCamera\n\n\tprivate scene: Scene\n\n\tprivate container: HTMLElement\n\n\tprivate renderer: WebGLRenderer\n\n\tprivate labelRenderer: CSS2DRenderer\n\n\tprivate clock: Clock\n\n\tprivate stats: Stats\n\n\tprivate fps = 60\n\n\tprivate lastRender = Date.now()\n\n\tprivate updateTargets: IUpdate[]\n\n\tconstructor(container: HTMLElement, scene: Scene, camera: PerspectiveCamera) {\n\t\tthis.container = container\n\t\tthis.scene = scene\n\t\tthis.camera = camera\n\t\tthis.renderer = new WebGLRenderer({ antialias: true })\n\t\tthis.clock = new Clock()\n\t\tthis.updateTargets = []\n\t\tthis.labelRenderer = new CSS2DRenderer()\n\t\tthis.stats = Stats()\n\t}\n\n\tpublic initialize = (): void => {\n\t\t// init rendere\n\n\t\tthis.renderer.setPixelRatio(window.devicePixelRatio)\n\t\tthis.renderer.setSize(window.innerWidth, window.innerHeight)\n\n\t\tthis.renderer.outputEncoding = sRGBEncoding\n\t\tthis.renderer.shadowMap.enabled = true\n\t\t// this.renderer.toneMapping = ACESFilmicToneMapping\n\t\t// this.renderer.toneMappingExposure = 0.85\n\n\t\tthis.labelRenderer.setSize(window.innerWidth, window.innerHeight)\n\t\tthis.labelRenderer.domElement.style.position = 'absolute'\n\t\tthis.labelRenderer.domElement.style.top = '0px'\n\n\t\twindow.addEventListener('resize', this.handleWindowResize)\n\t\tthis.container.appendChild(this.renderer.domElement)\n\t\tthis.container.appendChild(this.labelRenderer.domElement)\n\t\tthis.container.appendChild(this.stats.dom)\n\t}\n\n\tprivate handleWindowResize = (/* event: UIEvent */): void => {\n\t\tthis.camera.aspect = window.innerWidth / window.innerHeight\n\t\tthis.camera.updateProjectionMatrix()\n\t\tthis.renderer.setSize(window.innerWidth, window.innerHeight)\n\t\tthis.labelRenderer.setSize(window.innerWidth, window.innerHeight)\n\t}\n\n\tpublic addUpdateTarget = (updateTarget: IUpdate): void => {\n\t\tthis.updateTargets = [...this.updateTargets, updateTarget]\n\t}\n\n\tpublic start = (): void => {\n\t\trequestAnimationFrame(this.renderLoop)\n\t}\n\n\tprivate renderLoop = (time: number): void => {\n\t\tconst now = Date.now()\n\t\tconst lastRenderDiff = now - this.lastRender\n\t\tconst interval = 1000 / this.fps\n\t\tif (lastRenderDiff > interval) {\n\t\t\tconst delta = this.clock.getDelta()\n\t\t\t// this.gameWorld.update(time, delta)\n\t\t\tthis.updateTargets.forEach((updateTarget) => updateTarget.update(time, delta))\n\t\t\tthis.stats.update()\n\t\t\tthis.lastRender = now - (lastRenderDiff % interval)\n\t\t\tthis.renderer.render(this.scene, this.camera)\n\t\t\tthis.labelRenderer.render(this.scene, this.camera)\n\t\t}\n\t\trequestAnimationFrame(this.renderLoop)\n\t}\n}\nexport default GameRenderer\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable no-console */\n/* eslint-disable @typescript-eslint/no-this-alias */\n/* eslint-disable no-restricted-properties */\n/* eslint-disable @typescript-eslint/no-shadow */\nimport { EventDispatcher, Matrix4, MOUSE, PerspectiveCamera, Quaternion, Spherical, TOUCH, Vector2, Vector3 } from 'three'\n\nconst changeEvent = { type: 'change' }\nconst startEvent = { type: 'start' }\nconst endEvent = { type: 'end' }\ninterface ICameraOrbitControls {\n\tcamera: PerspectiveCamera\n\tdomElement: HTMLElement\n\n\t// API\n\tenabled: boolean\n\ttarget: Vector3\n\n\tminDistance: number\n\tmaxDistance: number\n\n\tminZoom: number\n\tmaxZoom: number\n\n\tminPolarAngle: number\n\tmaxPolarAngle: number\n\n\tminAzimuthAngle: number\n\tmaxAzimuthAngle: number\n\n\tenableDamping: boolean\n\tdampingFactor: number\n\n\tenableZoom: boolean\n\tzoomSpeed: number\n\n\tenableRotate: boolean\n\trotateSpeed: number\n\n\tenablePan: boolean\n\tpanSpeed: number\n\tscreenSpacePanning: boolean\n\tkeyPanSpeed: number\n\n\tautoRotate: boolean\n\tautoRotateSpeed: number\n\n\tkeys: { LEFT: string; UP: string; RIGHT: string; BOTTOM: string }\n\tmouseButtons: { LEFT: MOUSE; MIDDLE: MOUSE; RIGHT: MOUSE }\n\ttouches: { ONE: TOUCH; TWO: TOUCH }\n\n\tupdate(): boolean\n\n\tlistenToKeyEvents(domElement: HTMLElement): void\n\n\tsaveState(): void\n\n\treset(): void\n\n\tdispose(): void\n\n\tgetPolarAngle(): number\n\n\tgetAzimuthalAngle(): number\n}\n\nclass CameraOrbitControls extends EventDispatcher implements ICameraOrbitControls {\n\tcamera: PerspectiveCamera\n\n\tdomElement: HTMLElement\n\n\tenabled: boolean\n\n\ttarget: Vector3\n\n\tminDistance: number\n\n\tmaxDistance: number\n\n\tminZoom: number\n\n\tmaxZoom: number\n\n\tminPolarAngle: number\n\n\tmaxPolarAngle: number\n\n\tminAzimuthAngle: number\n\n\tmaxAzimuthAngle: number\n\n\tenableDamping: boolean\n\n\tdampingFactor: number\n\n\tenableZoom: boolean\n\n\tzoomSpeed: number\n\n\tenableRotate: boolean\n\n\trotateSpeed: number\n\n\tenablePan: boolean\n\n\tpanSpeed: number\n\n\tscreenSpacePanning: boolean\n\n\tkeyPanSpeed: number\n\n\tautoRotate: boolean\n\n\tautoRotateSpeed: number\n\n\tkeys: { LEFT: string; UP: string; RIGHT: string; BOTTOM: string }\n\n\tmouseButtons: { LEFT: MOUSE; MIDDLE: MOUSE; RIGHT: MOUSE }\n\n\ttouches: { ONE: TOUCH; TWO: TOUCH }\n\n\ttarget0: Vector3\n\n\tposition0: Vector3\n\n\tzoom0: number\n\n\tdomElementKeyEvents: HTMLElement | null\n\n\tgetPolarAngle: () => number\n\n\tgetAzimuthalAngle: () => number\n\n\tlistenToKeyEvents: (domElement: HTMLElement) => void\n\n\tsaveState: () => void\n\n\treset: () => void\n\n\tdispose: () => void\n\n\tupdate = (): boolean => true\n\n\tconstructor(camera: PerspectiveCamera, domElement: HTMLElement) {\n\t\tsuper()\n\n\t\tif (domElement === undefined) console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.')\n\n\t\tthis.camera = camera\n\t\tthis.domElement = domElement\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Vector3()\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0\n\t\tthis.maxDistance = Infinity\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0\n\t\tthis.maxZoom = Infinity\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0 // radians\n\t\tthis.maxPolarAngle = Math.PI // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = -Infinity // radians\n\t\tthis.maxAzimuthAngle = Infinity // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false\n\t\tthis.dampingFactor = 0.05\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true\n\t\tthis.zoomSpeed = 1.0\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true\n\t\tthis.rotateSpeed = 1.0\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true\n\t\tthis.panSpeed = 1.0\n\t\tthis.screenSpacePanning = true // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0 // pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false\n\t\tthis.autoRotateSpeed = 2.0 // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = {\n\t\t\tLEFT: 'ArrowLeft',\n\t\t\tUP: 'ArrowUp',\n\t\t\tRIGHT: 'ArrowRight',\n\t\t\tBOTTOM: 'ArrowDown'\n\t\t}\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = {\n\t\t\tLEFT: MOUSE.ROTATE,\n\t\t\tMIDDLE: MOUSE.DOLLY,\n\t\t\tRIGHT: MOUSE.PAN\n\t\t}\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN }\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone()\n\t\tthis.position0 = this.camera.position.clone()\n\t\tthis.zoom0 = this.camera.zoom\n\n\t\t// the target DOM element for key events\n\t\tthis.domElementKeyEvents = null\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = (): number => {\n\t\t\treturn spherical.phi\n\t\t}\n\n\t\tthis.getAzimuthalAngle = (): number => {\n\t\t\treturn spherical.theta\n\t\t}\n\n\t\tthis.listenToKeyEvents = (domElement: HTMLElement) => {\n\t\t\tdomElement.addEventListener('keydown', onKeyDown)\n\t\t\tthis.domElementKeyEvents = domElement\n\t\t}\n\n\t\tthis.saveState = (): void => {\n\t\t\tscope.target0.copy(scope.target)\n\t\t\tscope.position0.copy(scope.camera.position)\n\t\t\tscope.zoom0 = scope.camera.zoom\n\t\t}\n\n\t\tthis.reset = (): void => {\n\t\t\tscope.target.copy(scope.target0)\n\t\t\tscope.camera.position.copy(scope.position0)\n\t\t\tscope.camera.zoom = scope.zoom0\n\n\t\t\tscope.camera.updateProjectionMatrix()\n\t\t\tscope.dispatchEvent(changeEvent)\n\n\t\t\tscope.update()\n\n\t\t\tstate = STATE.NONE\n\t\t}\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = ((): (() => boolean) => {\n\t\t\tconst offset = new Vector3()\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tconst quat = new Quaternion().setFromUnitVectors(camera.up, new Vector3(0, 1, 0))\n\t\t\tconst quatInverse = quat.clone().invert()\n\n\t\t\tconst lastPosition = new Vector3()\n\t\t\tconst lastQuaternion = new Quaternion()\n\n\t\t\tconst twoPI = 2 * Math.PI\n\n\t\t\treturn (): boolean => {\n\t\t\t\tconst { position } = scope.camera\n\n\t\t\t\toffset.copy(position).sub(scope.target)\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion(quat)\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3(offset)\n\n\t\t\t\tif (scope.autoRotate && state === STATE.NONE) {\n\t\t\t\t\trotateLeft(getAutoRotationAngle())\n\t\t\t\t}\n\n\t\t\t\tif (scope.enableDamping) {\n\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor\n\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor\n\t\t\t\t} else {\n\t\t\t\t\tspherical.theta += sphericalDelta.theta\n\t\t\t\t\tspherical.phi += sphericalDelta.phi\n\t\t\t\t}\n\n\t\t\t\t// restrict theta to be between desired limits\n\n\t\t\t\tlet min = scope.minAzimuthAngle\n\t\t\t\tlet max = scope.maxAzimuthAngle\n\n\t\t\t\tif (Number.isFinite(min) && Number.isFinite(max)) {\n\t\t\t\t\tif (min < -Math.PI) min += twoPI\n\t\t\t\t\telse if (min > Math.PI) min -= twoPI\n\n\t\t\t\t\tif (max < -Math.PI) max += twoPI\n\t\t\t\t\telse if (max > Math.PI) max -= twoPI\n\n\t\t\t\t\tif (min <= max) {\n\t\t\t\t\t\tspherical.theta = Math.max(min, Math.min(max, spherical.theta))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tspherical.theta = spherical.theta > (min + max) / 2 ? Math.max(min, spherical.theta) : Math.min(max, spherical.theta)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi))\n\n\t\t\t\tspherical.makeSafe()\n\n\t\t\t\tspherical.radius *= scale\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tspherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius))\n\n\t\t\t\t// move target to panned location\n\n\t\t\t\tif (scope.enableDamping === true) {\n\t\t\t\t\tscope.target.addScaledVector(panOffset, scope.dampingFactor)\n\t\t\t\t} else {\n\t\t\t\t\tscope.target.add(panOffset)\n\t\t\t\t}\n\n\t\t\t\toffset.setFromSpherical(spherical)\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion(quatInverse)\n\n\t\t\t\tposition.copy(scope.target).add(offset)\n\n\t\t\t\tscope.camera.lookAt(scope.target)\n\n\t\t\t\tif (scope.enableDamping === true) {\n\t\t\t\t\tsphericalDelta.theta *= 1 - scope.dampingFactor\n\t\t\t\t\tsphericalDelta.phi *= 1 - scope.dampingFactor\n\n\t\t\t\t\tpanOffset.multiplyScalar(1 - scope.dampingFactor)\n\t\t\t\t} else {\n\t\t\t\t\tsphericalDelta.set(0, 0, 0)\n\n\t\t\t\t\tpanOffset.set(0, 0, 0)\n\t\t\t\t}\n\n\t\t\t\tscale = 1\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif (zoomChanged || lastPosition.distanceToSquared(scope.camera.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.camera.quaternion)) > EPS) {\n\t\t\t\t\tscope.dispatchEvent(changeEvent)\n\n\t\t\t\t\tlastPosition.copy(scope.camera.position)\n\t\t\t\t\tlastQuaternion.copy(scope.camera.quaternion)\n\t\t\t\t\tzoomChanged = false\n\n\t\t\t\t\treturn true\n\t\t\t\t}\n\n\t\t\t\treturn false\n\t\t\t}\n\t\t})()\n\n\t\tthis.dispose = (): void => {\n\t\t\tscope.domElement.removeEventListener('contextmenu', onContextMenu)\n\n\t\t\tscope.domElement.removeEventListener('pointerdown', onPointerDown)\n\t\t\tscope.domElement.removeEventListener('wheel', onMouseWheel)\n\n\t\t\tscope.domElement.removeEventListener('touchstart', onTouchStart)\n\t\t\tscope.domElement.removeEventListener('touchend', onTouchEnd)\n\t\t\tscope.domElement.removeEventListener('touchmove', onTouchMove)\n\n\t\t\tscope.domElement.ownerDocument.removeEventListener('pointermove', onPointerMove)\n\t\t\tscope.domElement.ownerDocument.removeEventListener('pointerup', onPointerUp)\n\n\t\t\tif (scope.domElementKeyEvents !== null) {\n\t\t\t\t// eslint-disable-next-line no-underscore-dangle\n\t\t\t\tscope.domElementKeyEvents.removeEventListener('keydown', onKeyDown)\n\t\t\t}\n\n\t\t\t// scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\t\t}\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tconst scope = this\n\n\t\tconst STATE = {\n\t\t\tNONE: -1,\n\t\t\tROTATE: 0,\n\t\t\tDOLLY: 1,\n\t\t\tPAN: 2,\n\t\t\tTOUCH_ROTATE: 3,\n\t\t\tTOUCH_PAN: 4,\n\t\t\tTOUCH_DOLLY_PAN: 5,\n\t\t\tTOUCH_DOLLY_ROTATE: 6\n\t\t}\n\n\t\tlet state = STATE.NONE\n\n\t\tconst EPS = 0.000001\n\n\t\t// current position in spherical coordinates\n\t\tconst spherical = new Spherical()\n\t\tconst sphericalDelta = new Spherical()\n\n\t\tlet scale = 1\n\t\tconst panOffset = new Vector3()\n\t\tlet zoomChanged = false\n\n\t\tconst rotateStart = new Vector2()\n\t\tconst rotateEnd = new Vector2()\n\t\tconst rotateDelta = new Vector2()\n\n\t\tconst panStart = new Vector2()\n\t\tconst panEnd = new Vector2()\n\t\tconst panDelta = new Vector2()\n\n\t\tconst dollyStart = new Vector2()\n\t\tconst dollyEnd = new Vector2()\n\t\tconst dollyDelta = new Vector2()\n\n\t\tfunction getAutoRotationAngle(): number {\n\t\t\treturn ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed\n\t\t}\n\n\t\tfunction getZoomScale(): number {\n\t\t\treturn Math.pow(0.95, scope.zoomSpeed)\n\t\t}\n\n\t\tfunction rotateLeft(angle: number): void {\n\t\t\tsphericalDelta.theta -= angle\n\t\t}\n\n\t\tfunction rotateUp(angle: number): void {\n\t\t\tsphericalDelta.phi -= angle\n\t\t}\n\n\t\tconst panLeft = (() => {\n\t\t\tconst v = new Vector3()\n\n\t\t\treturn function panLeft(distance: number, objectMatrix: Matrix4) {\n\t\t\t\tv.setFromMatrixColumn(objectMatrix, 0) // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar(-distance)\n\n\t\t\t\tpanOffset.add(v)\n\t\t\t}\n\t\t})()\n\n\t\tconst panUp = (() => {\n\t\t\tconst v = new Vector3()\n\n\t\t\treturn function panUp(distance: number, objectMatrix: Matrix4) {\n\t\t\t\tif (scope.screenSpacePanning === true) {\n\t\t\t\t\tv.setFromMatrixColumn(objectMatrix, 1)\n\t\t\t\t} else {\n\t\t\t\t\tv.setFromMatrixColumn(objectMatrix, 0)\n\t\t\t\t\tv.crossVectors(scope.camera.up, v)\n\t\t\t\t}\n\n\t\t\t\tv.multiplyScalar(distance)\n\n\t\t\t\tpanOffset.add(v)\n\t\t\t}\n\t\t})()\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tconst pan = (() => {\n\t\t\tconst offset = new Vector3()\n\n\t\t\treturn function pan(deltaX: number, deltaY: number) {\n\t\t\t\tconst element = scope.domElement\n\n\t\t\t\tif (scope.camera.isPerspectiveCamera) {\n\t\t\t\t\t// perspective\n\t\t\t\t\tconst { position } = scope.camera\n\t\t\t\t\toffset.copy(position).sub(scope.target)\n\t\t\t\t\tlet targetDistance = offset.length()\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan(((scope.camera.fov / 2) * Math.PI) / 180.0)\n\n\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\t\tpanLeft((2 * deltaX * targetDistance) / element.clientHeight, scope.camera.matrix)\n\t\t\t\t\tpanUp((2 * deltaY * targetDistance) / element.clientHeight, scope.camera.matrix)\n\t\t\t\t}\n\t\t\t\t// else if (scope.camera.isOrthographicCamera) {\n\t\t\t\t// \t// isOrthographicCamera\n\t\t\t\t// \t// orthographic\n\t\t\t\t// \tpanLeft((deltaX * (scope.camera.right - scope.camera.left)) / scope.camera.zoom / element.clientWidth, scope.camera.matrix)\n\t\t\t\t// \tpanUp((deltaY * (scope.camera.top - scope.camera.bottom)) / scope.camera.zoom / element.clientHeight, scope.camera.matrix)\n\t\t\t\t// }\n\t\t\t\telse {\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.')\n\t\t\t\t\tscope.enablePan = false\n\t\t\t\t}\n\t\t\t}\n\t\t})()\n\n\t\tfunction dollyOut(dollyScale: number): void {\n\t\t\tif (scope.camera.isPerspectiveCamera) {\n\t\t\t\tscale /= dollyScale\n\t\t\t}\n\t\t\t//  else if (scope.camera.isOrthographicCamera) {\n\t\t\t// \tscope.camera.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.camera.zoom * dollyScale))\n\t\t\t// \tscope.camera.updateProjectionMatrix()\n\t\t\t// \tzoomChanged = true\n\t\t\t// }\n\t\t\telse {\n\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n\t\t\t\tscope.enableZoom = false\n\t\t\t}\n\t\t}\n\n\t\tfunction dollyIn(dollyScale: number): void {\n\t\t\tif (scope.camera.isPerspectiveCamera) {\n\t\t\t\tscale *= dollyScale\n\t\t\t}\n\t\t\t// else if (scope.camera.isOrthographicCamera) {\n\t\t\t// \tscope.camera.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.camera.zoom / dollyScale))\n\t\t\t// \tscope.camera.updateProjectionMatrix()\n\t\t\t// \tzoomChanged = true\n\t\t\t// }\n\t\t\telse {\n\t\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n\t\t\t\tscope.enableZoom = false\n\t\t\t}\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate(event: { clientX: number; clientY: number }): void {\n\t\t\trotateStart.set(event.clientX, event.clientY)\n\t\t}\n\n\t\tfunction handleMouseDownDolly(event: { clientX: number; clientY: number }): void {\n\t\t\tdollyStart.set(event.clientX, event.clientY)\n\t\t}\n\n\t\tfunction handleMouseDownPan(event: { clientX: number; clientY: number }): void {\n\t\t\tpanStart.set(event.clientX, event.clientY)\n\t\t}\n\n\t\tfunction handleMouseMoveRotate(event: { clientX: number; clientY: number }): void {\n\t\t\trotateEnd.set(event.clientX, event.clientY)\n\n\t\t\trotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed)\n\n\t\t\tconst element = scope.domElement\n\n\t\t\trotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight) // yes, height\n\n\t\t\trotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight)\n\n\t\t\trotateStart.copy(rotateEnd)\n\n\t\t\tscope.update()\n\t\t}\n\n\t\tfunction handleMouseMoveDolly(event: { clientX: number; clientY: number }): void {\n\t\t\tdollyEnd.set(event.clientX, event.clientY)\n\n\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart)\n\n\t\t\tif (dollyDelta.y > 0) {\n\t\t\t\tdollyOut(getZoomScale())\n\t\t\t} else if (dollyDelta.y < 0) {\n\t\t\t\tdollyIn(getZoomScale())\n\t\t\t}\n\n\t\t\tdollyStart.copy(dollyEnd)\n\n\t\t\tscope.update()\n\t\t}\n\n\t\tfunction handleMouseMovePan(event: { clientX: number; clientY: number }): void {\n\t\t\tpanEnd.set(event.clientX, event.clientY)\n\n\t\t\tpanDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed)\n\n\t\t\tpan(panDelta.x, panDelta.y)\n\n\t\t\tpanStart.copy(panEnd)\n\n\t\t\tscope.update()\n\t\t}\n\n\t\tfunction handleMouseUp(event: MouseEvent): void {\n\t\t\t// no-op\n\t\t}\n\n\t\tfunction handleMouseWheel(event: { deltaY: number }): void {\n\t\t\tif (event.deltaY < 0) {\n\t\t\t\tdollyIn(getZoomScale())\n\t\t\t} else if (event.deltaY > 0) {\n\t\t\t\tdollyOut(getZoomScale())\n\t\t\t}\n\n\t\t\tscope.update()\n\t\t}\n\n\t\tfunction handleKeyDown(event: KeyboardEvent): void {\n\t\t\tlet needsUpdate = false\n\n\t\t\tswitch (event.code) {\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan(0, scope.keyPanSpeed)\n\t\t\t\t\tneedsUpdate = true\n\t\t\t\t\tbreak\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan(0, -scope.keyPanSpeed)\n\t\t\t\t\tneedsUpdate = true\n\t\t\t\t\tbreak\n\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan(scope.keyPanSpeed, 0)\n\t\t\t\t\tneedsUpdate = true\n\t\t\t\t\tbreak\n\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan(-scope.keyPanSpeed, 0)\n\t\t\t\t\tneedsUpdate = true\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tbreak\n\t\t\t}\n\n\t\t\tif (needsUpdate) {\n\t\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\t\tevent.preventDefault()\n\n\t\t\t\tscope.update()\n\t\t\t}\n\t\t}\n\n\t\tfunction handleTouchStartRotate(event: TouchEvent): void {\n\t\t\tif (event.touches.length === 1) {\n\t\t\t\trotateStart.set(event.touches[0].pageX, event.touches[0].pageY)\n\t\t\t} else {\n\t\t\t\tconst x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX)\n\t\t\t\tconst y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY)\n\n\t\t\t\trotateStart.set(x, y)\n\t\t\t}\n\t\t}\n\n\t\tfunction handleTouchStartPan(event: TouchEvent): void {\n\t\t\tif (event.touches.length === 1) {\n\t\t\t\tpanStart.set(event.touches[0].pageX, event.touches[0].pageY)\n\t\t\t} else {\n\t\t\t\tconst x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX)\n\t\t\t\tconst y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY)\n\n\t\t\t\tpanStart.set(x, y)\n\t\t\t}\n\t\t}\n\n\t\tfunction handleTouchStartDolly(event: TouchEvent): void {\n\t\t\tconst dx = event.touches[0].pageX - event.touches[1].pageX\n\t\t\tconst dy = event.touches[0].pageY - event.touches[1].pageY\n\n\t\t\tconst distance = Math.sqrt(dx * dx + dy * dy)\n\n\t\t\tdollyStart.set(0, distance)\n\t\t}\n\n\t\tfunction handleTouchStartDollyPan(event: TouchEvent): void {\n\t\t\tif (scope.enableZoom) handleTouchStartDolly(event)\n\n\t\t\tif (scope.enablePan) handleTouchStartPan(event)\n\t\t}\n\n\t\tfunction handleTouchStartDollyRotate(event: TouchEvent): void {\n\t\t\tif (scope.enableZoom) handleTouchStartDolly(event)\n\n\t\t\tif (scope.enableRotate) handleTouchStartRotate(event)\n\t\t}\n\n\t\tfunction handleTouchMoveRotate(event: TouchEvent): void {\n\t\t\tif (event.touches.length === 1) {\n\t\t\t\trotateEnd.set(event.touches[0].pageX, event.touches[0].pageY)\n\t\t\t} else {\n\t\t\t\tconst x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX)\n\t\t\t\tconst y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY)\n\n\t\t\t\trotateEnd.set(x, y)\n\t\t\t}\n\n\t\t\trotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed)\n\n\t\t\tconst element = scope.domElement\n\n\t\t\trotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight) // yes, height\n\n\t\t\trotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight)\n\n\t\t\trotateStart.copy(rotateEnd)\n\t\t}\n\n\t\tfunction handleTouchMovePan(event: TouchEvent): void {\n\t\t\tif (event.touches.length === 1) {\n\t\t\t\tpanEnd.set(event.touches[0].pageX, event.touches[0].pageY)\n\t\t\t} else {\n\t\t\t\tconst x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX)\n\t\t\t\tconst y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY)\n\n\t\t\t\tpanEnd.set(x, y)\n\t\t\t}\n\n\t\t\tpanDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed)\n\n\t\t\tpan(panDelta.x, panDelta.y)\n\n\t\t\tpanStart.copy(panEnd)\n\t\t}\n\n\t\tfunction handleTouchMoveDolly(event: TouchEvent): void {\n\t\t\tconst dx = event.touches[0].pageX - event.touches[1].pageX\n\t\t\tconst dy = event.touches[0].pageY - event.touches[1].pageY\n\n\t\t\tconst distance = Math.sqrt(dx * dx + dy * dy)\n\n\t\t\tdollyEnd.set(0, distance)\n\n\t\t\tdollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed))\n\n\t\t\tdollyOut(dollyDelta.y)\n\n\t\t\tdollyStart.copy(dollyEnd)\n\t\t}\n\n\t\tfunction handleTouchMoveDollyPan(event: TouchEvent): void {\n\t\t\tif (scope.enableZoom) handleTouchMoveDolly(event)\n\n\t\t\tif (scope.enablePan) handleTouchMovePan(event)\n\t\t}\n\n\t\tfunction handleTouchMoveDollyRotate(event: TouchEvent): void {\n\t\t\tif (scope.enableZoom) handleTouchMoveDolly(event)\n\n\t\t\tif (scope.enableRotate) handleTouchMoveRotate(event)\n\t\t}\n\n\t\tfunction handleTouchEnd(event: TouchEvent): void {\n\t\t\t// no-op\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onPointerDown(event: PointerEvent): void {\n\t\t\tif (scope.enabled === false) return\n\n\t\t\tswitch (event.pointerType) {\n\t\t\t\tcase 'mouse':\n\t\t\t\tcase 'pen':\n\t\t\t\t\tonMouseDown(event)\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tbreak\n\t\t\t\t// TODO touch\n\t\t\t}\n\t\t}\n\n\t\tfunction onPointerMove(event: PointerEvent): void {\n\t\t\tif (scope.enabled === false) return\n\n\t\t\tswitch (event.pointerType) {\n\t\t\t\tcase 'mouse':\n\t\t\t\tcase 'pen':\n\t\t\t\t\tonMouseMove(event)\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tbreak\n\t\t\t\t// TODO touch\n\t\t\t}\n\t\t}\n\n\t\tfunction onPointerUp(event: PointerEvent): void {\n\t\t\tswitch (event.pointerType) {\n\t\t\t\tcase 'mouse':\n\t\t\t\tcase 'pen':\n\t\t\t\t\tonMouseUp(event)\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tbreak\n\n\t\t\t\t// TODO touch\n\t\t\t}\n\t\t}\n\n\t\tfunction onMouseDown(event: MouseEvent): void {\n\t\t\t// Prevent the browser from scrolling.\n\t\t\tevent.preventDefault()\n\n\t\t\t// Manually set the focus since calling preventDefault above\n\t\t\t// prevents the browser from setting it automatically.\n\n\t\t\tif (scope.domElement.focus) {\n\t\t\t\tscope.domElement.focus()\n\t\t\t} else {\n\t\t\t\twindow.focus()\n\t\t\t}\n\n\t\t\tlet mouseAction\n\n\t\t\tswitch (event.button) {\n\t\t\t\tcase 0:\n\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 1:\n\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 2:\n\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT\n\t\t\t\t\tbreak\n\n\t\t\t\tdefault:\n\t\t\t\t\tmouseAction = -1\n\t\t\t}\n\n\t\t\tswitch (mouseAction) {\n\t\t\t\tcase MOUSE.DOLLY:\n\t\t\t\t\tif (scope.enableZoom === false) return\n\n\t\t\t\t\thandleMouseDownDolly(event)\n\n\t\t\t\t\tstate = STATE.DOLLY\n\n\t\t\t\t\tbreak\n\n\t\t\t\tcase MOUSE.ROTATE:\n\t\t\t\t\tif (event.ctrlKey || event.metaKey || event.shiftKey) {\n\t\t\t\t\t\tif (scope.enablePan === false) return\n\n\t\t\t\t\t\thandleMouseDownPan(event)\n\n\t\t\t\t\t\tstate = STATE.PAN\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (scope.enableRotate === false) return\n\n\t\t\t\t\t\thandleMouseDownRotate(event)\n\n\t\t\t\t\t\tstate = STATE.ROTATE\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak\n\n\t\t\t\tcase MOUSE.PAN:\n\t\t\t\t\tif (event.ctrlKey || event.metaKey || event.shiftKey) {\n\t\t\t\t\t\tif (scope.enableRotate === false) return\n\n\t\t\t\t\t\thandleMouseDownRotate(event)\n\n\t\t\t\t\t\tstate = STATE.ROTATE\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (scope.enablePan === false) return\n\n\t\t\t\t\t\thandleMouseDownPan(event)\n\n\t\t\t\t\t\tstate = STATE.PAN\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak\n\n\t\t\t\tdefault:\n\t\t\t\t\tstate = STATE.NONE\n\t\t\t}\n\n\t\t\tif (state !== STATE.NONE) {\n\t\t\t\tscope.domElement.ownerDocument.addEventListener('pointermove', onPointerMove)\n\t\t\t\tscope.domElement.ownerDocument.addEventListener('pointerup', onPointerUp)\n\n\t\t\t\tscope.dispatchEvent(startEvent)\n\t\t\t}\n\t\t}\n\n\t\tfunction onMouseMove(event: MouseEvent): void {\n\t\t\tif (scope.enabled === false) return\n\n\t\t\tevent.preventDefault()\n\n\t\t\tswitch (state) {\n\t\t\t\tcase STATE.ROTATE:\n\t\t\t\t\tif (scope.enableRotate === false) return\n\n\t\t\t\t\thandleMouseMoveRotate(event)\n\n\t\t\t\t\tbreak\n\n\t\t\t\tcase STATE.DOLLY:\n\t\t\t\t\tif (scope.enableZoom === false) return\n\n\t\t\t\t\thandleMouseMoveDolly(event)\n\n\t\t\t\t\tbreak\n\n\t\t\t\tcase STATE.PAN:\n\t\t\t\t\tif (scope.enablePan === false) return\n\n\t\t\t\t\thandleMouseMovePan(event)\n\n\t\t\t\t\tbreak\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tfunction onMouseUp(event: MouseEvent): void {\n\t\t\tscope.domElement.ownerDocument.removeEventListener('pointermove', onPointerMove)\n\t\t\tscope.domElement.ownerDocument.removeEventListener('pointerup', onPointerUp)\n\n\t\t\tif (scope.enabled === false) return\n\n\t\t\thandleMouseUp(event)\n\n\t\t\tscope.dispatchEvent(endEvent)\n\n\t\t\tstate = STATE.NONE\n\t\t}\n\n\t\tfunction onMouseWheel(event: WheelEvent): void {\n\t\t\tif (scope.enabled === false || scope.enableZoom === false || (state !== STATE.NONE && state !== STATE.ROTATE)) return\n\n\t\t\tevent.preventDefault()\n\n\t\t\tscope.dispatchEvent(startEvent)\n\n\t\t\thandleMouseWheel(event)\n\n\t\t\tscope.dispatchEvent(endEvent)\n\t\t}\n\n\t\tfunction onKeyDown(event: KeyboardEvent): void {\n\t\t\tif (scope.enabled === false || scope.enablePan === false) return\n\n\t\t\thandleKeyDown(event)\n\t\t}\n\n\t\tfunction onTouchStart(event: TouchEvent): void {\n\t\t\tif (scope.enabled === false) return\n\n\t\t\tevent.preventDefault() // prevent scrolling\n\n\t\t\tswitch (event.touches.length) {\n\t\t\t\tcase 1:\n\t\t\t\t\tswitch (scope.touches.ONE) {\n\t\t\t\t\t\tcase TOUCH.ROTATE:\n\t\t\t\t\t\t\tif (scope.enableRotate === false) return\n\n\t\t\t\t\t\t\thandleTouchStartRotate(event)\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE\n\n\t\t\t\t\t\t\tbreak\n\n\t\t\t\t\t\tcase TOUCH.PAN:\n\t\t\t\t\t\t\tif (scope.enablePan === false) return\n\n\t\t\t\t\t\t\thandleTouchStartPan(event)\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN\n\n\t\t\t\t\t\t\tbreak\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tstate = STATE.NONE\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 2:\n\t\t\t\t\tswitch (scope.touches.TWO) {\n\t\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\t\t\t\t\t\t\tif (scope.enableZoom === false && scope.enablePan === false) return\n\n\t\t\t\t\t\t\thandleTouchStartDollyPan(event)\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN\n\n\t\t\t\t\t\t\tbreak\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\t\t\t\t\t\t\tif (scope.enableZoom === false && scope.enableRotate === false) return\n\n\t\t\t\t\t\t\thandleTouchStartDollyRotate(event)\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE\n\n\t\t\t\t\t\t\tbreak\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tstate = STATE.NONE\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak\n\n\t\t\t\tdefault:\n\t\t\t\t\tstate = STATE.NONE\n\t\t\t}\n\n\t\t\tif (state !== STATE.NONE) {\n\t\t\t\tscope.dispatchEvent(startEvent)\n\t\t\t}\n\t\t}\n\n\t\tfunction onTouchMove(event: TouchEvent): void {\n\t\t\tif (scope.enabled === false) return\n\n\t\t\tevent.preventDefault() // prevent scrolling\n\n\t\t\tswitch (state) {\n\t\t\t\tcase STATE.TOUCH_ROTATE:\n\t\t\t\t\tif (scope.enableRotate === false) return\n\n\t\t\t\t\thandleTouchMoveRotate(event)\n\n\t\t\t\t\tscope.update()\n\n\t\t\t\t\tbreak\n\n\t\t\t\tcase STATE.TOUCH_PAN:\n\t\t\t\t\tif (scope.enablePan === false) return\n\n\t\t\t\t\thandleTouchMovePan(event)\n\n\t\t\t\t\tscope.update()\n\n\t\t\t\t\tbreak\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\t\t\t\t\tif (scope.enableZoom === false && scope.enablePan === false) return\n\n\t\t\t\t\thandleTouchMoveDollyPan(event)\n\n\t\t\t\t\tscope.update()\n\n\t\t\t\t\tbreak\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\t\t\t\t\tif (scope.enableZoom === false && scope.enableRotate === false) return\n\n\t\t\t\t\thandleTouchMoveDollyRotate(event)\n\n\t\t\t\t\tscope.update()\n\n\t\t\t\t\tbreak\n\n\t\t\t\tdefault:\n\t\t\t\t\tstate = STATE.NONE\n\t\t\t}\n\t\t}\n\n\t\tfunction onTouchEnd(event: TouchEvent): void {\n\t\t\tif (scope.enabled === false) return\n\n\t\t\thandleTouchEnd(event)\n\n\t\t\tscope.dispatchEvent(endEvent)\n\n\t\t\tstate = STATE.NONE\n\t\t}\n\n\t\tfunction onContextMenu(event: MouseEvent): void {\n\t\t\tif (scope.enabled === false) return\n\n\t\t\tevent.preventDefault()\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener('contextmenu', onContextMenu)\n\n\t\tscope.domElement.addEventListener('pointerdown', onPointerDown)\n\t\tscope.domElement.addEventListener('wheel', onMouseWheel, {\n\t\t\tpassive: false\n\t\t})\n\n\t\tscope.domElement.addEventListener('touchstart', onTouchStart, {\n\t\t\tpassive: false\n\t\t})\n\t\tscope.domElement.addEventListener('touchend', onTouchEnd)\n\t\tscope.domElement.addEventListener('touchmove', onTouchMove, {\n\t\t\tpassive: false\n\t\t})\n\n\t\t// force an update at start\n\n\t\tthis.update()\n\t}\n}\n\nexport default CameraOrbitControls\n","import { MOUSE, PerspectiveCamera, TOUCH } from 'three'\nimport CameraOrbitControls from './cameraOrbitControls'\n\nclass CameraMapControls extends CameraOrbitControls {\n\tconstructor(camera: PerspectiveCamera, domElement: HTMLElement) {\n\t\tsuper(camera, domElement)\n\n\t\tthis.screenSpacePanning = false // pan orthogonal to world-space direction camera.up\n\n\t\tthis.mouseButtons.LEFT = MOUSE.PAN\n\t\tthis.mouseButtons.RIGHT = MOUSE.ROTATE\n\n\t\tthis.touches.ONE = TOUCH.PAN\n\t\tthis.touches.TWO = TOUCH.DOLLY_ROTATE\n\t}\n}\nexport default CameraMapControls\n","import { PerspectiveCamera, Raycaster, Vector2 } from 'three'\nimport { ICordinates } from '../gameObjects/gameObjectWorldData'\nimport GameWorld from '../gameWorld'\n\nclass WorldInteractionControls {\n\tprivate camera: PerspectiveCamera\n\n\tprivate container: HTMLElement\n\n\tprivate gameWorld: GameWorld\n\n\tconstructor(container: HTMLElement, camera: PerspectiveCamera, gameWorld: GameWorld) {\n\t\tthis.container = container\n\t\tthis.camera = camera\n\t\tthis.gameWorld = gameWorld\n\t}\n\n\tpublic initialize = (): void => {\n\t\tthis.container.addEventListener('click', this.handleClick, false)\n\t\tthis.container.addEventListener('contextmenu', this.handleClick, false)\n\t\tthis.container.addEventListener('mousemove', this.handleMouseMove, false)\n\t}\n\n\tgetMouseRaycaster = (event: MouseEvent): Raycaster => {\n\t\tconst raycaster = new Raycaster()\n\t\tconst mouse = new Vector2()\n\t\tmouse.x = (event.clientX / window.innerWidth) * 2 - 1\n\t\tmouse.y = -(event.clientY / window.innerHeight) * 2 + 1\n\n\t\traycaster.setFromCamera(mouse, this.camera)\n\t\treturn raycaster\n\t}\n\n\tprivate handleMouseMove = (event: MouseEvent): void => {\n\t\tevent.preventDefault()\n\t\tconst raycaster = this.getMouseRaycaster(event)\n\t\tconst intersecs = this.gameWorld.getGameObjectIntersection(raycaster)\n\t\tthis.gameWorld.hoverGameObject(intersecs)\n\t}\n\n\tprivate handleClick = (event: MouseEvent): void => {\n\t\tevent.preventDefault()\n\t\tif (event.button === 0) {\n\t\t\tthis.handleLeftClick(event)\n\t\t}\n\t\tif (event.button === 2) {\n\t\t\tthis.handleRightClick(event)\n\t\t}\n\t}\n\n\tprivate handleLeftClick = (event: MouseEvent): void => {\n\t\tconst raycaster = this.getMouseRaycaster(event)\n\t\tconst intersecs = this.gameWorld.getGameObjectIntersection(raycaster)\n\t\tthis.gameWorld.selectGameObject(intersecs, true)\n\t}\n\n\tprivate handleRightClick = (event: MouseEvent): void => {\n\t\tconst raycaster = this.getMouseRaycaster(event)\n\t\tconst intersecs = this.gameWorld.getSceneIntersection(raycaster)\n\t\tif (intersecs && intersecs.length > 0) {\n\t\t\tconst destination: ICordinates = {\n\t\t\t\tx: intersecs[0].point.x,\n\t\t\t\ty: intersecs[0].point.y,\n\t\t\t\tz: intersecs[0].point.z\n\t\t\t}\n\t\t\tthis.gameWorld.setSelectedGameObjectsDestination(destination)\n\t\t}\n\t}\n}\n\nexport default WorldInteractionControls\n","import { PerspectiveCamera } from 'three'\nimport CameraMapControls from './cameraMapControls'\nimport WorldInteractionControls from './worldInteractionControls'\nimport GameWorld from '../gameWorld'\nimport { IUpdate } from '../gameRenderer'\n\nclass GameControls implements IUpdate {\n\tprivate cameraMapControls: CameraMapControls\n\n\tprivate worldInteractionControls: WorldInteractionControls\n\n\tconstructor(container: HTMLElement, camera: PerspectiveCamera, gameWorld: GameWorld) {\n\t\tthis.worldInteractionControls = new WorldInteractionControls(container, camera, gameWorld)\n\t\tthis.cameraMapControls = new CameraMapControls(camera, container)\n\t}\n\n\tpublic initialize = (): void => {\n\t\tthis.worldInteractionControls.initialize()\n\n\t\tthis.cameraMapControls.screenSpacePanning = false\n\t\tthis.cameraMapControls.minDistance = 5\n\t\tthis.cameraMapControls.maxDistance = 75\n\n\t\t// \"Math.PI\" = allow full bird view\n\t\t// \"Math.PI / 10\" = allow 10% angle from full bird view\n\t\tthis.cameraMapControls.minPolarAngle = Math.PI / 10\n\n\t\t// \"0\" = allow to look from bottom\n\t\t// \"Math.PI / 2.5\" = lowest look angle is 40%\n\t\tthis.cameraMapControls.maxPolarAngle = Math.PI / 2.5\n\n\t\tthis.cameraMapControls.target.set(0, 0, 0)\n\t\t// setInterval(() => this.cameraMapControls.update(), 5000)\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tpublic update = (timer: number, delta: number): void => {\n\t\tthis.cameraMapControls.update()\n\t}\n}\nexport default GameControls\n","import { Material, Mesh, Object3D } from 'three'\n\nclass Object3DHelper {\n\tpublic static cloneObject3D = (object: Object3D, recursive = true, cloneMaterials = false): Object3D => {\n\t\tconst newObject = object.clone(true)\n\t\tif (recursive) {\n\t\t\tnewObject.traverse((m) => {\n\t\t\t\tconst mesh = m as Mesh\n\t\t\t\tif (mesh.isMesh && cloneMaterials) {\n\t\t\t\t\tmesh.material = Object3DHelper.cloneMaterial(mesh.material)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\treturn newObject\n\t}\n\n\tpublic static setShadows = (object: Object3D, castShadow = true, receiveShadow = true): Object3D => {\n\t\tobject.traverse((m) => {\n\t\t\tconst mesh = m as Mesh\n\t\t\tmesh.castShadow = castShadow\n\t\t\tmesh.receiveShadow = receiveShadow\n\t\t})\n\t\treturn object\n\t}\n\n\tpublic static cloneMaterial = (material: Material | Material[]): Material | Material[] => {\n\t\tlet newMaterial = material\n\t\tif (Array.isArray(newMaterial)) {\n\t\t\tnewMaterial = newMaterial.filter((im) => im.isMaterial).map((m) => m.clone())\n\t\t} else if (newMaterial.isMaterial) {\n\t\t\tnewMaterial = newMaterial.clone()\n\t\t}\n\t\treturn newMaterial\n\t}\n}\nexport default Object3DHelper\n","var _path, _path2, _path3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTowerIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 512 512\",\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M323.84 452.267c-5.12 0-8.533 3.413-8.533 8.533 0 5.12 3.413 8.533 8.533 8.533s8.533-3.413 8.533-8.533c0-5.12-3.413-8.533-8.533-8.533z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M372.48 129.707 264.107 38.006V8.533c0-5.12-3.413-8.533-8.533-8.533-5.12 0-8.533 3.413-8.533 8.533v30.195l-107.52 90.978c-2.56 2.56-3.413 5.973-2.56 9.387s4.267 5.973 7.68 5.973h8.533v25.6c0 5.12 3.413 8.533 8.533 8.533h8.533v230.4h-8.533c-4.267 0-7.68 3.413-8.533 7.68l-8.533 85.333c0 2.56.853 5.12 2.56 6.827.853 1.707 3.413 2.56 5.973 2.56h204.8c2.56 0 5.12-.853 5.973-2.56 1.707-1.707 2.56-4.267 2.56-6.827l-8.533-85.333c-.853-4.267-4.267-7.68-8.533-7.68h-8.533V179.2h8.533c5.12 0 8.533-3.413 8.533-8.533v-25.6h8.533c3.413 0 6.827-2.56 8.533-5.973.853-3.414 0-6.827-2.56-9.387zM255.573 53.76l87.04 74.24H167.68l87.893-74.24zm93.014 441.173H162.56l6.827-68.267h172.374l6.826 68.267zm-24.747-204.8h-17.067c-5.12 0-8.533 3.413-8.533 8.533s3.413 8.533 8.533 8.533h17.067v102.4H187.307V384h17.067c5.12 0 8.533-3.413 8.533-8.533s-3.413-8.533-8.533-8.533h-17.067V221.867h17.067c5.12 0 8.533-3.413 8.533-8.533 0-5.12-3.413-8.533-8.533-8.533h-17.067v-25.6H323.84v110.932zm17.067-128H170.241v-17.067h170.667v17.067z\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M289.707 452.267h-51.2c-5.12 0-8.533 3.413-8.533 8.533 0 5.12 3.413 8.533 8.533 8.533h51.2c5.12 0 8.533-3.413 8.533-8.533 0-5.12-3.413-8.533-8.533-8.533zM204.373 452.267h-17.067c-5.12 0-8.533 3.413-8.533 8.533 0 5.12 3.413 8.533 8.533 8.533h17.067c5.12 0 8.533-3.413 8.533-8.533.001-5.12-3.413-8.533-8.533-8.533zM238.507 281.6h34.133c5.12 0 8.533-3.413 8.533-8.533V230.4c0-14.507-11.093-25.6-25.6-25.6-14.507 0-25.6 11.093-25.6 25.6v42.667c0 5.12 3.414 8.533 8.534 8.533zm8.533-51.2c0-5.12 3.413-8.533 8.533-8.533 5.12 0 8.533 3.413 8.533 8.533v34.133H247.04V230.4zM238.507 384h34.133c5.12 0 8.533-3.413 8.533-8.533V332.8c0-14.507-11.093-25.6-25.6-25.6-14.507 0-25.6 11.093-25.6 25.6v42.667c0 5.12 3.414 8.533 8.534 8.533zm8.533-51.2c0-5.12 3.413-8.533 8.533-8.533 5.12 0 8.533 3.413 8.533 8.533v34.133H247.04V332.8z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTowerIcon);\nexport default __webpack_public_path__ + \"static/media/tower-icon.5d90a352.svg\";\nexport { ForwardRef as ReactComponent };","import { PerspectiveCamera, Scene } from 'three'\nimport ModelLoader, { LoadedModels } from './loaders/modelLoader'\nimport { IGameObject } from './gameObjects/gameObject'\nimport MoveableGameObject from './gameObjects/moveableGameObject'\nimport GameStateDataService from './services/gameStateDataService'\nimport { CreateUnitResponse, SetUnitDestination, SetUnitPosition } from './services/models'\nimport GameWorld from './gameWorld'\nimport GameRenderer from './gameRenderer'\nimport GameControls from './controls/gameControls'\nimport Object3DHelper from './helpers/object3dHelper'\n\nclass Game {\n\tprivate scene: Scene\n\n\tprivate camera: PerspectiveCamera\n\n\tprivate gameRenderer: GameRenderer\n\n\tprivate gameControls: GameControls\n\n\tprivate modelLoader: ModelLoader\n\n\tprivate gameWorld: GameWorld\n\n\tprivate gameStateDataService: GameStateDataService\n\n\tconstructor(container: HTMLDivElement) {\n\t\tthis.scene = new Scene()\n\t\tthis.camera = new PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 200)\n\n\t\tthis.gameWorld = new GameWorld(this.scene)\n\t\tthis.gameRenderer = new GameRenderer(container, this.scene, this.camera)\n\t\tthis.gameControls = new GameControls(container, this.camera, this.gameWorld)\n\t\tthis.modelLoader = new ModelLoader('assets/models/')\n\t\tthis.gameStateDataService = new GameStateDataService()\n\t}\n\n\tpublic initialize = (): void => {\n\t\tthis.gameRenderer.initialize()\n\t\tthis.gameControls.initialize()\n\t\tthis.modelLoader.initialize()\n\t\tthis.gameWorld.initialize()\n\n\t\tthis.gameRenderer.addUpdateTarget(this.gameWorld)\n\t\tthis.gameRenderer.addUpdateTarget(this.gameControls)\n\t\tthis.gameWorld.addSetGameObjectWorldDataListener('destination', (id, worldData) => {\n\t\t\tconst { destination } = worldData\n\t\t\tthis.gameStateDataService.setUnitDestination(id, destination.x, destination.z)\n\t\t})\n\t\tthis.camera.position.set(30, 30, -20)\n\t\tthis.loadModels()\n\t}\n\n\tprivate connectToServer = (connectionAtempt = 0): void => {\n\t\tthis.gameStateDataService\n\t\t\t.connectToWebsocket(1)\n\t\t\t.then(() => this.handleConnectedToServer(true, connectionAtempt + 1))\n\t\t\t.catch(() => this.handleConnectedToServer(false, connectionAtempt + 1))\n\t}\n\n\tprivate handleConnectedToServer = (connected: boolean, connectionAtempt = 0): void => {\n\t\tif (connected) {\n\t\t\tthis.gameStateDataService.addMessageHandler('CreateUnit', this.handleServerCreateUnit)\n\t\t\tthis.gameStateDataService.addMessageHandler('SetUnitDestination', this.handleServerSetUnitDestination)\n\t\t\tthis.gameStateDataService.addMessageHandler('SetUnitPosition', this.handleServerSetUnitPosition)\n\n\t\t\tthis.gameRenderer.start()\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.connectToServer(connectionAtempt)\n\t\t\t}, 5000 * connectionAtempt)\n\t\t}\n\t}\n\n\tprivate handleServerCreateUnit = (message: CreateUnitResponse): void => {\n\t\tconst { position: pos, id } = message.CreateUnit\n\t\tif (pos.length >= 2) {\n\t\t\tthis.gameWorld.addGameObject(this.createMoveableTower(id, pos[0], pos[1]))\n\t\t}\n\t}\n\n\tprivate handleServerSetUnitPosition = (message: SetUnitPosition): void => {\n\t\tconst { position: pos, id } = message.SetUnitPosition\n\t\tif (pos.length >= 2) {\n\t\t\tthis.gameWorld.setGameObjectWorldData(id, 'position', { x: pos[0], z: pos[1], y: 0.1 })\n\t\t}\n\t}\n\n\tprivate handleServerSetUnitDestination = (message: SetUnitDestination): void => {\n\t\tconst { destination: pos, id } = message.SetUnitDestination\n\t\tif (pos.length >= 2) {\n\t\t\tthis.gameWorld.setGameObjectWorldData(id, 'destination', { x: pos[0], z: pos[1], y: 0.1 })\n\t\t}\n\t}\n\n\tprivate handleLoadModelsCompleted = (): void => {\n\t\tthis.gameStateDataService.fetchInitialGameState().then((resp) => {\n\t\t\tthis.connectToServer()\n\t\t\tObject.keys(resp).forEach((key) => {\n\t\t\t\tconst unit = resp[key]\n\t\t\t\tif (unit.position.length >= 2) {\n\t\t\t\t\tthis.gameWorld.addGameObject(this.createMoveableTower(unit.id, unit.position[0], unit.position[1]))\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tpublic handleActionbarButtonClicked = (button: string): void => {\n\t\tthis.gameStateDataService.createUnit(10, 10)\n\t}\n\n\tprivate loadModels = (): void => {\n\t\tthis.modelLoader.loadModels(\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tname: 'tower',\n\t\t\t\t\tpath: '/tower/scene.gltf',\n\t\t\t\t\tonLoaded: (tower) => tower.object.scale.setScalar(0.03)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'well',\n\t\t\t\t\tpath: '/well/scene.gltf',\n\t\t\t\t\tonLoaded: (well) => well.object.scale.setScalar(0.3)\n\t\t\t\t}\n\t\t\t],\n\t\t\t() => {\n\t\t\t\tthis.handleLoadModelsCompleted()\n\t\t\t}\n\t\t)\n\t}\n\n\tprivate handleGameObjectReachedDestination = (obj: MoveableGameObject): void => {\n\t\tthis.gameStateDataService.setUnitPosition(obj.key, obj.worldData.position.x, obj.worldData.position.z)\n\t}\n\n\tprivate createMoveableTower = (id: string, posX: number, posZ: number): IGameObject => this.createMoveableGameObject('tower', id, posX, posZ)\n\n\tprivate createMoveableWell = (id: string, posX: number, posZ: number): IGameObject => this.createMoveableGameObject('well', id, posX, posZ)\n\n\tprivate createMoveableGameObject = (modelKey: keyof LoadedModels, id: string, posX: number, posZ: number): IGameObject => {\n\t\tconst model = this.modelLoader.loadedModels[modelKey]\n\t\tconst gameObj = new MoveableGameObject(id, Object3DHelper.setShadows(model.object))\n\t\tgameObj.destinationReached = this.handleGameObjectReachedDestination\n\t\tgameObj.worldData.receiveShadow = true\n\t\tgameObj.worldData.castShadow = true\n\t\tgameObj.worldData.position.y = 0.1\n\t\tgameObj.worldData.position.x = posX\n\t\tgameObj.worldData.position.z = posZ\n\t\treturn gameObj\n\t}\n}\n\nexport default Game\n","import React, { PureComponent } from 'react'\n\nexport type withSvgIconProps = React.SVGProps<SVGSVGElement>\n\nconst withSvgIcon = <P extends React.SVGProps<SVGSVGElement>>(WrappedSvgIcon: React.ComponentType<P>, defaultProps?: withSvgIconProps): React.ComponentType<P & withSvgIconProps> =>\n\tclass WithSvgIcon extends PureComponent<P & withSvgIconProps> {\n\t\tprivate defaultPropValues: withSvgIconProps = {\n\t\t\tfill: '#336699',\n\t\t\t...defaultProps\n\t\t}\n\n\t\trender(): JSX.Element {\n\t\t\tconst { props } = this\n\t\t\tconst { ...svgProps } = { ...this.defaultPropValues, ...props, className: `with-svg-icon ${props.className}` }\n\t\t\treturn <WrappedSvgIcon {...svgProps} />\n\t\t}\n\t}\n\nexport default withSvgIcon\n","var _path, _path2, _path3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgWellIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 280.667 280.667\",\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M52.544 280.667h174.424c12.169 0 22.595-7.706 26.65-18.46H25.892c4.057 10.754 14.482 18.46 26.652 18.46zM24.069 231.035h231.374v19.172H24.069zM25.078 219.035h229.357c-3.298-12.057-14.368-20.985-27.467-20.985H52.544c-13.098 0-24.17 8.929-27.466 20.985zM197.552 0H83.332L6.334 87.92h267.999v-.238zM63.06 94.662v97.54h19.491l.01-54.073H129.745a13.715 13.715 0 0 0 10.187 4.521c4.033 0 7.671-1.744 10.187-4.521h47.33v54.073h19.649v-97.54h-19.671l-.023 26.074h-46.446c-2.504-3.366-6.505-5.552-11.025-5.552-4.521 0-8.522 2.186-11.026 5.552H82.595V94.662H63.06zm76.872 26.244c4.419 0 8.011 3.592 8.011 8.011 0 4.418-3.592 8.01-8.011 8.01-4.42 0-8.012-3.592-8.012-8.01 0-4.419 3.592-8.011 8.012-8.011z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m125.269 171.636 4.033 20.612h20.883l3.751-20.612h-11.534v1.271a2.487 2.487 0 0 1-2.483 2.48h-.022a2.487 2.487 0 0 1-2.481-2.48v-1.271h-12.147z\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M139.909 174.73a2.004 2.004 0 0 0 2.005-2.005v-24.262a2.005 2.005 0 1 0-4.011 0v24.262c0 1.107.898 2.005 2.006 2.005z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgWellIcon);\nexport default __webpack_public_path__ + \"static/media/well-icon.a58b4836.svg\";\nexport { ForwardRef as ReactComponent };","import './index.scss'\nimport withSvgIcon from './withSvgIcon'\nimport { ReactComponent as TowerIconSVG } from '../../../assets/icons/tower-icon.svg'\nimport { ReactComponent as WellIconSVG } from '../../../assets/icons/well-icon.svg'\n\nconst TowerIcon = withSvgIcon(TowerIconSVG)\nconst WellIcon = withSvgIcon(WellIconSVG)\nexport { TowerIcon, WellIcon }\n","import React, { PureComponent } from 'react'\nimport './basicUI.scss'\nimport { TowerIcon, WellIcon } from '../../../components/ui/icons'\n\ninterface BasicUIProps {\n\tonClickButton: (event: MouseEvent, button: string) => void\n}\nclass BasicUI extends PureComponent<BasicUIProps> {\n\thandleButtonClick =\n\t\t(button: string) =>\n\t\t(event: React.MouseEvent<HTMLButtonElement>): void => {\n\t\t\tevent.preventDefault()\n\t\t\tconst { onClickButton } = this.props\n\t\t\tonClickButton(event.nativeEvent, button)\n\t\t}\n\n\trender = (): JSX.Element => {\n\t\treturn (\n\t\t\t<div className=\"ui-actionbar\">\n\t\t\t\t<button type=\"button\" onClick={this.handleButtonClick('tower')}>\n\t\t\t\t\t<TowerIcon />\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" onClick={this.handleButtonClick('well')}>\n\t\t\t\t\t<WellIcon />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default BasicUI\n","import React, { PureComponent } from 'react'\nimport Game from '../../game'\nimport BasicUI from './components/basicUI'\n\nclass GameContainer extends PureComponent<Record<string, never>> {\n\tprivate initialized = false\n\n\tprivate game: Game | undefined\n\n\tprivate gameContainer: HTMLDivElement | null = null\n\n\tcomponentDidMount(): void {\n\t\tthis.initGame()\n\t}\n\n\tinitGame = (): void => {\n\t\tif (this.gameContainer && !this.initialized) {\n\t\t\tthis.game = new Game(this.gameContainer)\n\t\t\tthis.game.initialize()\n\t\t\tthis.initialized = true\n\t\t}\n\t}\n\n\thandleActionbarButtonClicked = (event: MouseEvent, button: string): void => {\n\t\tif (this.game) {\n\t\t\tthis.game.handleActionbarButtonClicked(button)\n\t\t}\n\t}\n\n\trender = (): JSX.Element => {\n\t\treturn (\n\t\t\t<div className=\"game\">\n\t\t\t\t<div\n\t\t\t\t\tid=\"game-container\"\n\t\t\t\t\tref={(gameContainer): void => {\n\t\t\t\t\t\tthis.gameContainer = gameContainer\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<BasicUI onClickButton={this.handleActionbarButtonClicked} />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default GameContainer\n","import React, { PureComponent } from 'react'\nimport { Link } from 'react-router-dom'\n\nclass HomeContainer extends PureComponent<Record<string, never>> {\n\trender = (): JSX.Element => {\n\t\treturn (\n\t\t\t<div className=\"home\" style={{ padding: 100 }}>\n\t\t\t\t<Link to=\"/game\" style={{ fontSize: 50 }}>\n\t\t\t\t\tGame\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default HomeContainer\n","import React, { PureComponent } from 'react'\nimport { HashRouter, Route } from 'react-router-dom'\nimport GameContainer from './game/index'\nimport HomeContainer from './home'\n\nclass App extends PureComponent {\n\trender = (): JSX.Element => {\n\t\treturn (\n\t\t\t<div className=\"App\">\n\t\t\t\t<HashRouter basename={process.env.PUBLIC_URL}>\n\t\t\t\t\t<Route path=\"/\" exact>\n\t\t\t\t\t\t<HomeContainer />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route path=\"/game\">\n\t\t\t\t\t\t<GameContainer />\n\t\t\t\t\t</Route>\n\t\t\t\t</HashRouter>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './containers'\nimport './styles/index.scss'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n)\n"],"sourceRoot":""}